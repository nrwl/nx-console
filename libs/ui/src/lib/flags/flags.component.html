<form [formGroup]="formGroup">
  <div *ngIf="configurations && configurations.length > 0">
    Configuration
    <select formControlName="configurations" name="configurations">
      <option [ngValue]="null">
        default
      </option>
      <option *ngFor="let config of configurations" [ngValue]="config.name">
        {{config.name}}
      </option>
    </select>
    <hr>
  </div>


  <div *ngFor="let field of fields" style="margin: 20px;" [class.error]="formGroup.hasError('required', field.name) && formGroup.get(field.name)?.touched">
    <span [ngClass]="{important: field.important}">
      {{ field.name }} type: {{ field.type }}, {{ field.description }}
    </span>

    <span *ngIf="field.type === 'boolean'">
      <mat-slide-toggle [formControlName]="field.name" [required]="field.required" [attr.name]="field.name">(default: {{ field.defaultValue }})</mat-slide-toggle>
    </span>

    <span *ngIf="field.enum">
      <select [formControlName]="field.name" [required]="field.required" [attr.name]="field.name">
        <option *ngFor="let value of fieldOptions(field)" [ngValue]="value">
          {{ fieldOption(value) }}
        </option>
      </select>
      <span *ngIf="field.defaultValue">
        (default: {{ field.defaultValue }})
      </span>
    </span>
    <span *ngIf="!field.enum && field.type !== 'boolean'">
      <input type="text" [formControlName]="field.name" [required]="field.required" [attr.name]="field.name">
      <span *ngIf="field.defaultValue">
        (default: {{ field.defaultValue }})
      </span>
    </span>
    <span *ngIf="field.required">
      *
    </span>
  </div>

  <button [disabled]="formGroup.invalid" (click)="onSubmit()" id="action">{{ actionLabel }}</button>
  <button type="reset" (click)="onReset()">Reset</button>
  <button type="button" (click)="onStop()">Stop</button>
</form>
